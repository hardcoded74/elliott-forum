(function(k){function h(f){if(n[f])return n[f].exports;var e=n[f]={i:f,l:!1,exports:{}};k[f].call(e.exports,e,e.exports,h);e.l=!0;return e.exports}var n={};h.m=k;h.c=n;h.d=function(f,e,a){h.o(f,e)||Object.defineProperty(f,e,{configurable:!1,enumerable:!0,get:a})};h.n=function(f){var e=f&&f.__esModule?function(){return f["default"]}:function(){return f};h.d(e,"a",e);return e};h.o=function(f,e){return Object.prototype.hasOwnProperty.call(f,e)};h.p="";return h(h.s=0)})([function(k,h,n){Object.defineProperty(h,
"__esModule",{value:!0});var f=function(){function e(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,b,c){b&&e(a.prototype,b);c&&e(a,c);return a}}();k=function(){function e(a){var b=this,c=a.layout,d=a.settings;d=void 0===d?{}:d;var C=a.listeners,p=a.init;p=void 0===p?!1:p;a=a.commonVersion;a=void 0===a?"20180112":a;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");
this.init=function(){b.initGet();b.initSet()};this.initGet=function(){b.rootEle=window.document.querySelector(b.settings.depth0Selector);null!==b.rootEle?(b.nodes=b.parse(b.rootEle),b.resizeGet()):console.error("Root selector not found")};this.initSet=function(){b.resizeSet();b.rootEle.classList.add("thNodes__nodeList--running");b.classAdded=!0;b.running=!0};this.resize=function(){b.resizeGet();b.resizeSet()};this.resizeGet=function(){b.globalWidth=b.rootEle.offsetWidth;b.updateGet()};this.resizeSet=
function(){b.updateSet()};this.listenersAdded=this.running=!1;this.minEnableWidth=1;this.layout=c;this.nodes={};this.equalCategories=!0;this.classAdded=!1;this.alwaysCheck=!0;this.newChanges=[];this.globalWidth=1;this.cookieArray=[];this.settings=Object.assign({depth0Selector:".thNodes__nodeList",depth1Selector:".block",depth2Selector:".node",separatorClass:"thNodes_separator"},d);this.settings.sizes=Object.assign({xs:200,sm:300,md:400,lg:600,xl:1E3},d.sizes||{});this.listeners=C||this.populateListeners();
this.rootEle=null;this.commonVersion=a;this.common=window.themehouse.common[a];p&&this.init()}f(e,[{key:"populateListeners",value:function(){for(var a=[],b=this.settings.sizes,c=Object.keys(b),d=0,e=c.length;d<e;d++){var p=c[d],f=b[p];a.push({name:"--below-"+p,min:0,max:f});a.push({name:"--above-"+p,min:f+1,max:999999});a.push({name:"--is-"+p,min:f+1,max:d<e-1?b[c[d+1]]:999999})}return a}},{key:"register",value:function(){this.common.register({phase:"initGet",addon:"TH_Nodes",func:this.initGet,order:10});
this.common.register({phase:"initSet",addon:"TH_Nodes",func:this.initSet,order:10});this.common.register({phase:"resizeGet",addon:"TH_Nodes",func:this.resizeGet,order:10});this.common.register({phase:"resizeSet",addon:"TH_Nodes",func:this.resizeSet,order:10})}},{key:"getIdFromClass",value:function(a,b){var c=b.split(" "),d=!0,e=!1,f=void 0;try{for(var h=c[Symbol.iterator](),l;!(d=(l=h.next()).done);d=!0){var m=l.value,q=m.replace(a,"");if(q!==m){var x=parseInt(q,10);if(0<x)return x}}}catch(g){e=!0,
f=g}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f;}}return-1}},{key:"getNodeId",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(null!==a){var c=a.className;if(!b){if(-1<c.indexOf("block--category"))return this.getIdFromClass("block--category",c);if(-1<c.indexOf("node--id"))return this.getIdFromClass("node--id",c);b=a.querySelector(this.settings.depth2Selector);if(null!==b)return this.getIdFromClass("node--id",b.className)}if(-1<c.indexOf(this.settings.separatorClass))return this.getIdFromClass("node--id",
c)}return-1}},{key:"formatLayout",value:function(a){var b={},c=this.layout[a];if("undefined"!==typeof c){a=c.fill_last_row;var d=c.max_columns;c=c.min_column_width;a&&a.value&&(b.fill=a.value);d&&d.value&&(b.cols=d.value);c&&c.value&&(b.width=c.value)}return b}},{key:"makeLayout",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b=Object.assign({cols:6,width:330,fill:0,id:a},this.formatLayout(0),b,this.formatLayout(a));b.cols=parseInt(b.cols,10);b.width=parseInt(b.width,
10);b.fill=parseInt(b.fill,10);-1===a&&(b.cols=1,b.width=1E3);return b}},{key:"findLayouts",value:function(a,b,c){var d=[];a=a.querySelectorAll(0===c?this.settings.depth1Selector:this.settings.depth2Selector);for(var e=0,f=0,h=a.length;f<h;f++){var l=a[f],m=this.getNodeId(l.previousElementSibling,!0);-1!==m&&(b=m,e+=1);m=this.getNodeId(l);"undefined"===typeof d[e]&&(d[e]={children:[],layout:this.makeLayout(b)});d[e].children.push({ele:l,id:m,depth:c,layouts:this.findLayouts(l,m,c+1),className:""})}return d}},
{key:"parse",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=this.findLayouts(a,-1,b);return 0===c.length?{}:{ele:a,id:-1,depth:b,className:"",ratio:1,layouts:c}}},{key:"calculateChanges",value:function(a,b){for(var c=a.ratio,d=a.layouts,e=c*this.globalWidth,f=0,h=0,l=0,m=d.length;l<m;l++){var q=d[l],x=q.children;q=q.layout;for(var g=x.length,k=Math.min(Math.floor(e/q.width),q.cols),u=0<k?k:1,n=g%k,v=1,D=Math.ceil(g/k),z=0,t=0;t<g;t++){var r=x[t],w=Math.floor(t/
k)+1;v===w?z+=1:(v=w,z=1);0===q.fill&&v===D&&0<n&&(u=n);w=100/u;var A=w+"%",B=this.findClassName({colNum:z,numCols:u,rowNum:v,rowNumAbs:f+v,nodeNumAbs:h,nodeNum:t,layoutNum:l,leftCol:0===t%u,rightCol:t%u===u-1,numLayouts:m,width:Math.floor(c*w*this.globalWidth/100)}),y={ele:r.ele};r.className!==B&&(y.className=r.ele.className.replace(r.className,"")+B,r.className=B);r.width!==A&&(y.width=A,r.width=A);"undefined"===typeof y.className&&"undefined"===typeof y.width||this.queueChange(y);r.ratio=c*w/100;
h+=1;this.calculateChanges(r,b+1)}f+=v}}},{key:"update",value:function(){this.updateGet();this.updateSet()}},{key:"updateGet",value:function(){this.newChanges=[];this.calculateChanges(this.nodes,0)}},{key:"updateSet",value:function(){this.processChanges()}},{key:"queueChange",value:function(a){this.newChanges.push(a)}},{key:"processChanges",value:function(){for(var a=0,b=this.newChanges.length;a<b;a++){var c=this.newChanges[a],d=c.ele,e=c.className;c=c.width;"undefined"!==typeof e&&(d.className=e);
"undefined"!==typeof c&&(d.style.width=c,d.style.flexBasis=c,d.style.maxWidth=c)}}},{key:"findClassName",value:function(a){var b=a.colNum,c=a.numCols,d=a.rowNum,e=a.rowNumAbs,f=a.nodeNum,h=a.nodeNumAbs,l=a.leftCol,m=a.rightCol,k=a.layoutNum,n=a.numLayouts;a=a.width;var g=" th_nodes";100>a&&(g+=" th_nodes_active");l&&(g+=" th_nodes_left");m&&(g+=" th_nodes_right");g=g+" th_nodes_col_"+b+" th_nodes_numCols_"+c+" th_nodes_row_"+d;g=g+" th_nodes_rowAbs_"+e;g=g+" th_nodes_layNum_"+k;g=g+" th_nodes_numLays_"+
n;g=g+" th_nodes_node_"+f;g=g+" th_nodes_nodeAbs_"+h;g=g+" th_nodes_row_"+(1===e%2?"odd":"even");b=this.listeners;if("undefined"!==typeof b)for(c=0,d=b.length;c<d;c++)a<b[c].max&&a>=b[c].min&&(g=g+" th_nodes"+b[c].name);return g}}]);return e}();"undefined"===typeof window.themehouse&&(window.themehouse={});"undefined"===typeof window.themehouse.nodes&&(window.themehouse.nodes={});window.themehouse.nodes.grid=k;h["default"]=k}]);